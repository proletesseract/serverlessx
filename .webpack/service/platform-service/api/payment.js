/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./platform-service/api/payment.ts":
/*!*****************************************!*\
  !*** ./platform-service/api/payment.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createPaymentQueue\": () => (/* binding */ createPaymentQueue),\n/* harmony export */   \"createPaymentTrigger\": () => (/* binding */ createPaymentTrigger)\n/* harmony export */ });\n/* harmony import */ var _utils_response_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/response.util */ \"./platform-service/utils/response.util.ts\");\n/* harmony import */ var _utils_dynamodb_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dynamodb.util */ \"./platform-service/utils/dynamodb.util.ts\");\n/* harmony import */ var _utils_request_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/request.util */ \"./platform-service/utils/request.util.ts\");\n/* harmony import */ var _controllers_access_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../controllers/access.controller */ \"./platform-service/controllers/access.controller.ts\");\n/* harmony import */ var _controllers_payment_controller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../controllers/payment.controller */ \"./platform-service/controllers/payment.controller.ts\");\n\n\n\n\n\nconst respondWithJson = new _utils_response_util__WEBPACK_IMPORTED_MODULE_0__.Response(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseFormatters.JSON);\nconst docClient = (0,_utils_dynamodb_util__WEBPACK_IMPORTED_MODULE_1__.createDocClient)(process.env);\nconst createPaymentTrigger = async (event) => {\n    const accessController = new _controllers_access_controller__WEBPACK_IMPORTED_MODULE_3__.AccessController();\n    let tokenAccessResponse;\n    try {\n        tokenAccessResponse = await accessController.tokenAccess(event.headers);\n    }\n    catch (err) {\n        return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.SERVER_ERROR, {\n            message: 'problem validating credentials',\n            error: err,\n        });\n    }\n    if (tokenAccessResponse.error) {\n        return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.SERVER_ERROR, tokenAccessResponse.error);\n    }\n    let parsed;\n    try {\n        parsed = (0,_utils_request_util__WEBPACK_IMPORTED_MODULE_2__.parseWith)(event.body, _utils_request_util__WEBPACK_IMPORTED_MODULE_2__.RequestFormatters.JSON);\n        if (!parsed.trade_id || !parsed.gateway || !parsed.payment_type || !parsed.payment_status || !parsed.amount || !parsed.currency) {\n            return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.BAD_REQUEST, {\n                message: 'unable to process payment',\n                error: new Error('invalid params'),\n            });\n        }\n    }\n    catch (err) {\n        return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.SERVER_ERROR, err);\n    }\n    const paymentController = new _controllers_payment_controller__WEBPACK_IMPORTED_MODULE_4__.PaymentController(docClient);\n    const createPaymentResponse = await paymentController.createPayment(parsed);\n    if (createPaymentResponse.error) {\n        return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.SERVER_ERROR, createPaymentResponse.error);\n    }\n    return respondWithJson.respond(_utils_response_util__WEBPACK_IMPORTED_MODULE_0__.ResponseCodes.OK, {\n        message: 'OK',\n        data: createPaymentResponse.data,\n    });\n};\nconst createPaymentQueue = async (event) => {\n    try {\n        if (!event || !event.Records || event.Records.length < 0) {\n            console.log('no records found', event);\n            return;\n        }\n        for (const record of event.Records) {\n            let parsed;\n            parsed = JSON.parse(record.body);\n            if (!parsed.trade_id || !parsed.gateway || !parsed.payment_type || !parsed.payment_status || !parsed.amount || !parsed.currency) {\n                throw new Error('missing queue parameters');\n            }\n            const paymentController = new _controllers_payment_controller__WEBPACK_IMPORTED_MODULE_4__.PaymentController(docClient);\n            const createPaymentResponse = await paymentController.createPayment(parsed);\n            if (createPaymentResponse.error) {\n                console.error(createPaymentResponse);\n            }\n            else {\n                console.log(createPaymentResponse);\n            }\n        }\n    }\n    catch (err) {\n        console.log('[Payment.queue] something went wrong', err, event);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL2FwaS9wYXltZW50LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQVdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvYXBpL3BheW1lbnQudHM/YzkzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElHYXRld2F5UHJveHlIYW5kbGVyLCBBUElHYXRld2F5RXZlbnQsIFNRU0V2ZW50IH0gZnJvbSAnYXdzLWxhbWJkYSdcbmltcG9ydCB7IFJlc3BvbnNlRm9ybWF0dGVycywgUmVzcG9uc2VDb2RlcywgUmVzcG9uc2UgfSBmcm9tICcuLi91dGlscy9yZXNwb25zZS51dGlsJ1xuaW1wb3J0IHsgRG9jdW1lbnRDbGllbnQgfSBmcm9tICdhd3Mtc2RrL2NsaWVudHMvZHluYW1vZGInXG5pbXBvcnQgeyBjcmVhdGVEb2NDbGllbnQgfSBmcm9tICcuLi91dGlscy9keW5hbW9kYi51dGlsJ1xuaW1wb3J0IHsgcGFyc2VXaXRoLCBSZXF1ZXN0Rm9ybWF0dGVycyB9IGZyb20gJy4uL3V0aWxzL3JlcXVlc3QudXRpbCdcbmltcG9ydCB7IEFjY2Vzc0NvbnRyb2xsZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9hY2Nlc3MuY29udHJvbGxlcidcbmltcG9ydCB7IENvbnRyb2xsZXJSZXNwb25zZSB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL19iYXNlLmNvbnRyb2xsZXInXG5pbXBvcnQgeyBQYXltZW50Q29udHJvbGxlciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL3BheW1lbnQuY29udHJvbGxlcidcbmltcG9ydCB7IFBheW1lbnRHYXRld2F5cywgUGF5bWVudFN0YXR1cywgUGF5bWVudFR5cGUgfSBmcm9tICcuLi9tb2RlbHMvcGF5bWVudC5tb2RlbCdcbmltcG9ydCB7IEF2YWlsYWJsZUN1cnJlbmNpZXMgfSBmcm9tICcuLi9tb2RlbHMvY3VycmVuY2llcy5tb2RlbCdcblxuY29uc3QgcmVzcG9uZFdpdGhKc29uID0gbmV3IFJlc3BvbnNlKFJlc3BvbnNlRm9ybWF0dGVycy5KU09OKVxuY29uc3QgZG9jQ2xpZW50OiBEb2N1bWVudENsaWVudCA9IGNyZWF0ZURvY0NsaWVudChwcm9jZXNzLmVudilcblxuaW50ZXJmYWNlIENyZWF0ZVBheW1lbnRSZXF1ZXN0IHtcbiAgdHJhZGVfaWQ6IHN0cmluZyxcbiAgZ2F0ZXdheTogUGF5bWVudEdhdGV3YXlzLFxuICBwYXltZW50X3R5cGU6IFBheW1lbnRUeXBlLFxuICBwYXltZW50X3N0YXR1czogUGF5bWVudFN0YXR1cyxcbiAgYW1vdW50OiBudW1iZXIsXG4gIGN1cnJlbmN5OiBBdmFpbGFibGVDdXJyZW5jaWVzLFxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUGF5bWVudFRyaWdnZXI6IEFQSUdhdGV3YXlQcm94eUhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IEFQSUdhdGV3YXlFdmVudCk6IFByb21pc2U8YW55PiA9PiB7XG5cbiAgY29uc3QgYWNjZXNzQ29udHJvbGxlcjpBY2Nlc3NDb250cm9sbGVyID0gbmV3IEFjY2Vzc0NvbnRyb2xsZXIoKVxuXG4gIGxldCB0b2tlbkFjY2Vzc1Jlc3BvbnNlOkNvbnRyb2xsZXJSZXNwb25zZVxuICB0cnkge1xuICAgIHRva2VuQWNjZXNzUmVzcG9uc2UgPSBhd2FpdCBhY2Nlc3NDb250cm9sbGVyLnRva2VuQWNjZXNzKGV2ZW50LmhlYWRlcnMpXG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgcmV0dXJuIHJlc3BvbmRXaXRoSnNvbi5yZXNwb25kKFJlc3BvbnNlQ29kZXMuU0VSVkVSX0VSUk9SLCB7XG4gICAgICBtZXNzYWdlOiAncHJvYmxlbSB2YWxpZGF0aW5nIGNyZWRlbnRpYWxzJyxcbiAgICAgIGVycm9yOiBlcnIsXG4gICAgfSlcbiAgfVxuXG4gIGlmICh0b2tlbkFjY2Vzc1Jlc3BvbnNlLmVycm9yKSB7XG4gICAgcmV0dXJuIHJlc3BvbmRXaXRoSnNvbi5yZXNwb25kKFJlc3BvbnNlQ29kZXMuU0VSVkVSX0VSUk9SLCB0b2tlbkFjY2Vzc1Jlc3BvbnNlLmVycm9yKVxuICB9XG5cbiAgbGV0IHBhcnNlZDpDcmVhdGVQYXltZW50UmVxdWVzdFxuICB0cnkge1xuXG4gICAgcGFyc2VkID0gcGFyc2VXaXRoKGV2ZW50LmJvZHksIFJlcXVlc3RGb3JtYXR0ZXJzLkpTT04pXG5cbiAgICBpZiAoIXBhcnNlZC50cmFkZV9pZCB8fCAhcGFyc2VkLmdhdGV3YXkgfHwgIXBhcnNlZC5wYXltZW50X3R5cGUgfHwgIXBhcnNlZC5wYXltZW50X3N0YXR1cyB8fCAhcGFyc2VkLmFtb3VudCB8fCAhcGFyc2VkLmN1cnJlbmN5KSB7XG4gICAgICByZXR1cm4gcmVzcG9uZFdpdGhKc29uLnJlc3BvbmQoUmVzcG9uc2VDb2Rlcy5CQURfUkVRVUVTVCwge1xuICAgICAgICBtZXNzYWdlOiAndW5hYmxlIHRvIHByb2Nlc3MgcGF5bWVudCcsXG4gICAgICAgIGVycm9yOiBuZXcgRXJyb3IoJ2ludmFsaWQgcGFyYW1zJyksXG4gICAgICB9KVxuICAgIH1cbiAgfSBjYXRjaChlcnIpIHtcbiAgICByZXR1cm4gcmVzcG9uZFdpdGhKc29uLnJlc3BvbmQoUmVzcG9uc2VDb2Rlcy5TRVJWRVJfRVJST1IsIGVycilcbiAgfVxuXG4gIGNvbnN0IHBheW1lbnRDb250cm9sbGVyID0gbmV3IFBheW1lbnRDb250cm9sbGVyKGRvY0NsaWVudClcbiAgY29uc3QgY3JlYXRlUGF5bWVudFJlc3BvbnNlID0gYXdhaXQgcGF5bWVudENvbnRyb2xsZXIuY3JlYXRlUGF5bWVudChwYXJzZWQpXG4gIFxuICBpZiAoY3JlYXRlUGF5bWVudFJlc3BvbnNlLmVycm9yKSB7XG4gICAgcmV0dXJuIHJlc3BvbmRXaXRoSnNvbi5yZXNwb25kKFJlc3BvbnNlQ29kZXMuU0VSVkVSX0VSUk9SLCBjcmVhdGVQYXltZW50UmVzcG9uc2UuZXJyb3IpXG4gIH1cblxuICByZXR1cm4gcmVzcG9uZFdpdGhKc29uLnJlc3BvbmQoUmVzcG9uc2VDb2Rlcy5PSywge1xuICAgIG1lc3NhZ2U6ICdPSycsXG4gICAgZGF0YTogY3JlYXRlUGF5bWVudFJlc3BvbnNlLmRhdGEsXG4gIH0pXG59ICAgICBcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBheW1lbnRRdWV1ZSA9IGFzeW5jIChldmVudDogU1FTRXZlbnQpOiBQcm9taXNlPGFueT4gPT4ge1xuICBcbiAgdHJ5IHtcblxuICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LlJlY29yZHMgfHwgZXZlbnQuUmVjb3Jkcy5sZW5ndGggPCAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnbm8gcmVjb3JkcyBmb3VuZCcsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgZXZlbnQuUmVjb3Jkcykge1xuICAgICAgbGV0IHBhcnNlZDpDcmVhdGVQYXltZW50UmVxdWVzdFxuICAgICAgcGFyc2VkID0gSlNPTi5wYXJzZShyZWNvcmQuYm9keSlcbiAgICAgIGlmICghcGFyc2VkLnRyYWRlX2lkIHx8ICFwYXJzZWQuZ2F0ZXdheSB8fCAhcGFyc2VkLnBheW1lbnRfdHlwZSB8fCAhcGFyc2VkLnBheW1lbnRfc3RhdHVzIHx8ICFwYXJzZWQuYW1vdW50IHx8ICFwYXJzZWQuY3VycmVuY3kpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIHF1ZXVlIHBhcmFtZXRlcnMnKVxuICAgICAgfVxuICAgICAgY29uc3QgcGF5bWVudENvbnRyb2xsZXIgPSBuZXcgUGF5bWVudENvbnRyb2xsZXIoZG9jQ2xpZW50KVxuICAgICAgY29uc3QgY3JlYXRlUGF5bWVudFJlc3BvbnNlID0gYXdhaXQgcGF5bWVudENvbnRyb2xsZXIuY3JlYXRlUGF5bWVudChwYXJzZWQpXG4gICAgICBcbiAgICAgIGlmIChjcmVhdGVQYXltZW50UmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihjcmVhdGVQYXltZW50UmVzcG9uc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhjcmVhdGVQYXltZW50UmVzcG9uc2UpXG4gICAgICB9XG4gICAgfSAgICAgXG5cbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnW1BheW1lbnQucXVldWVdIHNvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLCBldmVudClcbiAgfVxuICAgIFxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./platform-service/api/payment.ts\n");

/***/ }),

/***/ "./platform-service/controllers/_base.controller.ts":
/*!**********************************************************!*\
  !*** ./platform-service/controllers/_base.controller.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseController\": () => (/* binding */ BaseController),\n/* harmony export */   \"ControllerResponseTypes\": () => (/* binding */ ControllerResponseTypes),\n/* harmony export */   \"ResponseCode\": () => (/* binding */ ResponseCode)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass BaseController {\n    constructor() { }\n    async seed(options) {\n        let existingItems;\n        try {\n            existingItems = await options.model.list();\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: `unable to fetch existing ${options.name} items`,\n                    data: err\n                }\n            };\n        }\n        if (existingItems && existingItems.length > 0) {\n            return {\n                data: {\n                    message: `${options.name} items already seeded`,\n                    users: existingItems,\n                }\n            };\n        }\n        let seedItems;\n        try {\n            const seedData = (0,fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync)(path__WEBPACK_IMPORTED_MODULE_1___default().resolve(__dirname, `${process.env.DB_SEEDS_PATH}/${options.file}`));\n            seedItems = JSON.parse(seedData.toString());\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: `unable to parse ${options.name} seed items`,\n                    data: err\n                }\n            };\n        }\n        try {\n            await options.model.putBatch(seedItems);\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: `unable to write ${options.name} seed items to database`,\n                    data: err\n                }\n            };\n        }\n        let newItems;\n        try {\n            newItems = await options.model.list();\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: `unable to fetch new ${options.name} items`,\n                    data: err\n                }\n            };\n        }\n        return {\n            data: {\n                message: `new ${options.name} items seeded`,\n                items: newItems,\n            }\n        };\n    }\n}\nvar ResponseCode;\n(function (ResponseCode) {\n})(ResponseCode || (ResponseCode = {}));\nvar ControllerResponseTypes;\n(function (ControllerResponseTypes) {\n    ControllerResponseTypes[\"SERVER_ERROR\"] = \"SEVER_ERROR\";\n    ControllerResponseTypes[\"RETRY\"] = \"RETRY\";\n    ControllerResponseTypes[\"ACTION_REQUIRED\"] = \"ACTION_REQUIRED\";\n    ControllerResponseTypes[\"SUCCESS\"] = \"SUCCESS\";\n})(ControllerResponseTypes || (ControllerResponseTypes = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL2NvbnRyb2xsZXJzL19iYXNlLmNvbnRyb2xsZXIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFXQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFFQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvY29udHJvbGxlcnMvX2Jhc2UuY29udHJvbGxlci50cz8zZjJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IEFzc2V0TW9kZWwgfSBmcm9tIFwiLi4vbW9kZWxzL2Fzc2V0Lm1vZGVsXCI7XG5pbXBvcnQgeyBPcmRlck1vZGVsIH0gZnJvbSBcIi4uL21vZGVscy9vcmRlci5tb2RlbFwiO1xuaW1wb3J0IHsgVXNlck1vZGVsIH0gZnJvbSBcIi4uL21vZGVscy91c2VyLm1vZGVsXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VlZE9wdGlvbnMge1xuICBtb2RlbDogVXNlck1vZGVsfE9yZGVyTW9kZWx8QXNzZXRNb2RlbCxcbiAgZmlsZTogc3RyaW5nLFxuICBuYW1lOiBzdHJpbmcsXG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBhc3luYyBzZWVkKG9wdGlvbnM6U2VlZE9wdGlvbnMpOiBQcm9taXNlPENvbnRyb2xsZXJSZXNwb25zZT4ge1xuXG4gICAgbGV0IGV4aXN0aW5nSXRlbXM6QXJyYXk8U2VlZE9wdGlvbnNbXCJtb2RlbFwiXT5cbiAgICB0cnkge1xuICAgICAgZXhpc3RpbmdJdGVtcyA9IGF3YWl0IG9wdGlvbnMubW9kZWwubGlzdCgpXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogYHVuYWJsZSB0byBmZXRjaCBleGlzdGluZyAke29wdGlvbnMubmFtZX0gaXRlbXNgLFxuICAgICAgICAgIGRhdGE6IGVyclxuICAgICAgICB9XG4gICAgICB9IGFzIENvbnRyb2xsZXJSZXNwb25zZVxuICAgIH1cblxuICAgIGlmIChleGlzdGluZ0l0ZW1zICYmIGV4aXN0aW5nSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG1lc3NhZ2U6IGAke29wdGlvbnMubmFtZX0gaXRlbXMgYWxyZWFkeSBzZWVkZWRgLFxuICAgICAgICAgIHVzZXJzOiBleGlzdGluZ0l0ZW1zLFxuICAgICAgICB9XG4gICAgICB9IGFzIENvbnRyb2xsZXJSZXNwb25zZSBcbiAgICB9ICAgIFxuXG4gICAgbGV0IHNlZWRJdGVtczpBcnJheTxTZWVkT3B0aW9uc1tcIm1vZGVsXCJdPlxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZWVkRGF0YSA9IHJlYWRGaWxlU3luYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBgJHtwcm9jZXNzLmVudi5EQl9TRUVEU19QQVRIfS8ke29wdGlvbnMuZmlsZX1gKSlcbiAgICAgIHNlZWRJdGVtcyA9IEpTT04ucGFyc2Uoc2VlZERhdGEudG9TdHJpbmcoKSlcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogYHVuYWJsZSB0byBwYXJzZSAke29wdGlvbnMubmFtZX0gc2VlZCBpdGVtc2AsXG4gICAgICAgICAgZGF0YTogZXJyXG4gICAgICAgIH1cbiAgICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG9wdGlvbnMubW9kZWwucHV0QmF0Y2goc2VlZEl0ZW1zKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBgdW5hYmxlIHRvIHdyaXRlICR7b3B0aW9ucy5uYW1lfSBzZWVkIGl0ZW1zIHRvIGRhdGFiYXNlYCxcbiAgICAgICAgICBkYXRhOiBlcnJcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb250cm9sbGVyUmVzcG9uc2VcbiAgICB9XG5cbiAgICBsZXQgbmV3SXRlbXM6QXJyYXk8VXNlck1vZGVsPlxuICAgIHRyeSB7XG4gICAgICBuZXdJdGVtcyA9IGF3YWl0IG9wdGlvbnMubW9kZWwubGlzdCgpXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogYHVuYWJsZSB0byBmZXRjaCBuZXcgJHtvcHRpb25zLm5hbWV9IGl0ZW1zYCxcbiAgICAgICAgICBkYXRhOiBlcnJcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb250cm9sbGVyUmVzcG9uc2VcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbWVzc2FnZTogYG5ldyAke29wdGlvbnMubmFtZX0gaXRlbXMgc2VlZGVkYCxcbiAgICAgICAgaXRlbXM6IG5ld0l0ZW1zLFxuICAgICAgfVxuICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgQ29udHJvbGxlclJlc3BvbnNlID0ge1xuICBlcnJvcj86IENvbnRyb2xsZXJFcnJvclxuICBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuICB0eXBlPzogQ29udHJvbGxlclJlc3BvbnNlVHlwZXMsXG59XG5cbmV4cG9ydCBlbnVtIFJlc3BvbnNlQ29kZSB7XG4gIFxufVxuXG5leHBvcnQgdHlwZSBDb250cm9sbGVyRXJyb3IgPSB7XG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgY29kZT86IHN0cmluZyxcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuZXhwb3J0IGVudW0gQ29udHJvbGxlclJlc3BvbnNlVHlwZXMge1xuICBTRVJWRVJfRVJST1IgPSAnU0VWRVJfRVJST1InLFxuICBSRVRSWSA9ICdSRVRSWScsXG4gIEFDVElPTl9SRVFVSVJFRCA9ICdBQ1RJT05fUkVRVUlSRUQnLCAgXG4gIFNVQ0NFU1MgPSAnU1VDQ0VTUycsXG59XG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./platform-service/controllers/_base.controller.ts\n");

/***/ }),

/***/ "./platform-service/controllers/access.controller.ts":
/*!***********************************************************!*\
  !*** ./platform-service/controllers/access.controller.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AccessController\": () => (/* binding */ AccessController)\n/* harmony export */ });\n/* harmony import */ var _utils_request_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/request.util */ \"./platform-service/utils/request.util.ts\");\n/* harmony import */ var _base_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_base.controller */ \"./platform-service/controllers/_base.controller.ts\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass AccessController extends _base_controller__WEBPACK_IMPORTED_MODULE_1__.BaseController {\n    constructor() {\n        super();\n    }\n    async apiKeyAccess(apiKey, secret) {\n        let apiAccess;\n        try {\n            apiAccess = (0,_utils_request_util__WEBPACK_IMPORTED_MODULE_0__.parseWith)(process.env.API_ACCESS, _utils_request_util__WEBPACK_IMPORTED_MODULE_0__.RequestFormatters.JSON);\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: 'unable to parse api config',\n                    data: err\n                }\n            };\n        }\n        if (apiKey !== apiAccess.api_key || secret !== apiAccess.secret) {\n            return {\n                error: {\n                    message: 'unauthorised',\n                    data: new Error('invalid API key or secret')\n                }\n            };\n        }\n        return {\n            data: {\n                message: 'authorized',\n            }\n        };\n    }\n    async tokenAccess(headers) {\n        if (!process.env.JWT_SECRET) {\n            return {\n                error: {\n                    message: 'unauthorised',\n                    data: new Error('invalid JWT configuration')\n                }\n            };\n        }\n        if (!headers.Authorization && !headers['x-access-token']) {\n            return {\n                error: {\n                    message: 'unauthorised',\n                    data: new Error('no authorisation headers found')\n                }\n            };\n        }\n        let tokenValue;\n        if (headers.Authorization) {\n            const tokenParts = headers.Authorization.split(' ');\n            tokenValue = tokenParts[1];\n        }\n        else if (headers['x-access-token']) {\n            tokenValue = headers['x-access-token'];\n        }\n        if (!tokenValue) {\n            return {\n                error: {\n                    message: 'unauthorised',\n                    data: new Error('no authorisation token found')\n                }\n            };\n        }\n        let decoded;\n        try {\n            decoded = await jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__.verify(tokenValue, process.env.JWT_SECRET);\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: 'unauthorised',\n                    data: err\n                }\n            };\n        }\n        return {\n            data: {\n                message: 'authorized',\n                decoded: decoded,\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL2NvbnRyb2xsZXJzL2FjY2Vzcy5jb250cm9sbGVyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBa0JBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ltbXV0YWJsZXgvLi9wbGF0Zm9ybS1zZXJ2aWNlL2NvbnRyb2xsZXJzL2FjY2Vzcy5jb250cm9sbGVyLnRzPzVlM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VXaXRoLCBSZXF1ZXN0Rm9ybWF0dGVycyB9IGZyb20gXCIuLi91dGlscy9yZXF1ZXN0LnV0aWxcIjtcbmltcG9ydCB7IEJhc2VDb250cm9sbGVyLCBDb250cm9sbGVyUmVzcG9uc2UgfSBmcm9tIFwiLi9fYmFzZS5jb250cm9sbGVyXCI7XG5pbXBvcnQgKiBhcyBqd3QgZnJvbSAnanNvbndlYnRva2VuJ1xuXG50eXBlIEFwaUFjY2VzcyA9IHtcbiAgYXBpX2tleTogc3RyaW5nLFxuICBzZWNyZXQ6IHN0cmluZyxcbn1cblxudHlwZSBFdmVudEhlYWRlcnMgPSB7XG4gIEF1dGhvcml6YXRpb246IHN0cmluZyxcbiAgJ3gtYWNjZXNzLXRva2VuJzogc3RyaW5nLFxufVxuXG50eXBlIERlY29kZWRUb2tlbiA9IHtcbiAgZW1haWw6IHN0cmluZyxcbiAgaWF0OiBudW1iZXIsXG4gIGV4cDogbnVtYmVyLFxufVxuXG5leHBvcnQgY2xhc3MgQWNjZXNzQ29udHJvbGxlciBleHRlbmRzIEJhc2VDb250cm9sbGVyIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpXG4gIH1cblxuICBhc3luYyBhcGlLZXlBY2Nlc3MoYXBpS2V5OnN0cmluZywgc2VjcmV0OnN0cmluZyk6IFByb21pc2U8Q29udHJvbGxlclJlc3BvbnNlPiB7XG5cbiAgICBsZXQgYXBpQWNjZXNzOkFwaUFjY2Vzc1xuXG4gICAgdHJ5IHtcbiAgICAgIGFwaUFjY2VzcyA9IHBhcnNlV2l0aChwcm9jZXNzLmVudi5BUElfQUNDRVNTLCBSZXF1ZXN0Rm9ybWF0dGVycy5KU09OKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiAndW5hYmxlIHRvIHBhcnNlIGFwaSBjb25maWcnLFxuICAgICAgICAgIGRhdGE6IGVyclxuICAgICAgICB9XG4gICAgICB9IGFzIENvbnRyb2xsZXJSZXNwb25zZVxuICAgIH1cbiAgICBcbiAgICBpZiAoYXBpS2V5ICE9PSBhcGlBY2Nlc3MuYXBpX2tleSB8fCBzZWNyZXQgIT09IGFwaUFjY2Vzcy5zZWNyZXQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ3VuYXV0aG9yaXNlZCcsXG4gICAgICAgICAgZGF0YTogbmV3IEVycm9yKCdpbnZhbGlkIEFQSSBrZXkgb3Igc2VjcmV0JylcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb250cm9sbGVyUmVzcG9uc2VcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbWVzc2FnZTogJ2F1dGhvcml6ZWQnLFxuICAgICAgfVxuICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG4gIH1cblxuICBhc3luYyB0b2tlbkFjY2VzcyhoZWFkZXJzOkV2ZW50SGVhZGVycyk6IFByb21pc2U8Q29udHJvbGxlclJlc3BvbnNlPiB7XG5cbiAgICBpZiAoIXByb2Nlc3MuZW52LkpXVF9TRUNSRVQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ3VuYXV0aG9yaXNlZCcsXG4gICAgICAgICAgZGF0YTogbmV3IEVycm9yKCdpbnZhbGlkIEpXVCBjb25maWd1cmF0aW9uJylcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb250cm9sbGVyUmVzcG9uc2VcbiAgICB9XG5cbiAgICBpZiAoIWhlYWRlcnMuQXV0aG9yaXphdGlvbiAmJiAhaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiAndW5hdXRob3Jpc2VkJyxcbiAgICAgICAgICBkYXRhOiBuZXcgRXJyb3IoJ25vIGF1dGhvcmlzYXRpb24gaGVhZGVycyBmb3VuZCcpXG4gICAgICAgIH1cbiAgICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG4gICAgfVxuXG4gICAgbGV0IHRva2VuVmFsdWVcbiAgICBcbiAgICBpZiAoaGVhZGVycy5BdXRob3JpemF0aW9uKSB7XG4gICAgICBjb25zdCB0b2tlblBhcnRzID0gaGVhZGVycy5BdXRob3JpemF0aW9uLnNwbGl0KCcgJylcbiAgICAgIHRva2VuVmFsdWUgPSB0b2tlblBhcnRzWzFdXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddKSB7XG4gICAgICB0b2tlblZhbHVlID0gaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4nXVxuICAgIH1cblxuICAgIGlmICghdG9rZW5WYWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiAndW5hdXRob3Jpc2VkJyxcbiAgICAgICAgICBkYXRhOiBuZXcgRXJyb3IoJ25vIGF1dGhvcmlzYXRpb24gdG9rZW4gZm91bmQnKVxuICAgICAgICB9XG4gICAgICB9IGFzIENvbnRyb2xsZXJSZXNwb25zZVxuICAgIH1cblxuICAgIC8vdmFsaWRhdGUgdGhlIHRva2VuXG4gICAgbGV0IGRlY29kZWQ6IERlY29kZWRUb2tlblxuICAgIHRyeSB7XG4gICAgICBkZWNvZGVkID0gYXdhaXQgand0LnZlcmlmeSh0b2tlblZhbHVlLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiAndW5hdXRob3Jpc2VkJyxcbiAgICAgICAgICBkYXRhOiBlcnJcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb250cm9sbGVyUmVzcG9uc2VcbiAgICB9ICAgIFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbWVzc2FnZTogJ2F1dGhvcml6ZWQnLFxuICAgICAgICBkZWNvZGVkOiBkZWNvZGVkLFxuICAgICAgfVxuICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG4gIH1cbiAgXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./platform-service/controllers/access.controller.ts\n");

/***/ }),

/***/ "./platform-service/controllers/payment.controller.ts":
/*!************************************************************!*\
  !*** ./platform-service/controllers/payment.controller.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PaymentController\": () => (/* binding */ PaymentController)\n/* harmony export */ });\n/* harmony import */ var _models_payment_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/payment.model */ \"./platform-service/models/payment.model.ts\");\n/* harmony import */ var _utils_queue_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/queue.util */ \"./platform-service/utils/queue.util.ts\");\n/* harmony import */ var _base_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_base.controller */ \"./platform-service/controllers/_base.controller.ts\");\n\n\n\nclass PaymentController extends _base_controller__WEBPACK_IMPORTED_MODULE_2__.BaseController {\n    constructor(docClient) {\n        super();\n        this.docClient = docClient;\n    }\n    async createPayment(createPaymentRequest) {\n        const newPayment = {\n            trade_id: createPaymentRequest.trade_id,\n            gateway: createPaymentRequest.gateway,\n            payment_type: createPaymentRequest.payment_type,\n            payment_status: createPaymentRequest.payment_status,\n            amount: createPaymentRequest.amount,\n            currency: createPaymentRequest.currency,\n        };\n        const paymentModel = new _models_payment_model__WEBPACK_IMPORTED_MODULE_0__.PaymentModel(this.docClient);\n        newPayment.payment_status = _models_payment_model__WEBPACK_IMPORTED_MODULE_0__.PaymentStatus.SUCCESSFUL;\n        let savedPayment;\n        try {\n            savedPayment = await paymentModel.put(newPayment);\n        }\n        catch (err) {\n            return {\n                error: {\n                    message: 'unable to save payment',\n                    data: err\n                }\n            };\n        }\n        let queuesConfig;\n        try {\n            queuesConfig = JSON.parse(process.env.QUEUES);\n            if (!queuesConfig.completeTrade || !queuesConfig.completeTrade.url) {\n                throw new Error('bad queues config');\n            }\n        }\n        catch (error) {\n            throw new Error('unable to parse queues config');\n        }\n        let queueService;\n        let sqs;\n        let messageBody;\n        try {\n            queueService = new _utils_queue_util__WEBPACK_IMPORTED_MODULE_1__.Queue();\n            sqs = await queueService.get();\n            messageBody = JSON.stringify({\n                id: createPaymentRequest.trade_id\n            });\n        }\n        catch (err) {\n            console.log('err', err);\n        }\n        const params = {\n            MessageBody: messageBody,\n            QueueUrl: queuesConfig.createOrder.url,\n        };\n        if (process.env.STAGE !== 'local') {\n            await queueService.publish(sqs, params);\n        }\n        else {\n            console.log(messageBody);\n        }\n        return {\n            data: {\n                message: 'payment successfully created',\n                payment: savedPayment,\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL2NvbnRyb2xsZXJzL3BheW1lbnQuY29udHJvbGxlci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvY29udHJvbGxlcnMvcGF5bWVudC5jb250cm9sbGVyLnRzPzI4MzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRDbGllbnQgfSBmcm9tIFwiYXdzLXNkay9jbGllbnRzL2R5bmFtb2RiXCI7XG5pbXBvcnQgeyBQYXltZW50LCBQYXltZW50TW9kZWwsIFBheW1lbnRTdGF0dXMgfSBmcm9tIFwiLi4vbW9kZWxzL3BheW1lbnQubW9kZWxcIjtcbmltcG9ydCB7IFF1ZXVlIH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXVlLnV0aWxcIjtcbmltcG9ydCB7IEJhc2VDb250cm9sbGVyLCBDb250cm9sbGVyUmVzcG9uc2UgfSBmcm9tIFwiLi9fYmFzZS5jb250cm9sbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBQYXltZW50Q29udHJvbGxlciBleHRlbmRzIEJhc2VDb250cm9sbGVyIHtcblxuICBwcml2YXRlIGRvY0NsaWVudDpEb2N1bWVudENsaWVudFxuXG4gIGNvbnN0cnVjdG9yKGRvY0NsaWVudDogRG9jdW1lbnRDbGllbnQpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5kb2NDbGllbnQgPSBkb2NDbGllbnRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVBheW1lbnQoY3JlYXRlUGF5bWVudFJlcXVlc3QpOiBQcm9taXNlPENvbnRyb2xsZXJSZXNwb25zZT4ge1xuXG4gICAgY29uc3QgbmV3UGF5bWVudDpQYXltZW50ID0ge1xuICAgICAgdHJhZGVfaWQ6IGNyZWF0ZVBheW1lbnRSZXF1ZXN0LnRyYWRlX2lkLFxuICAgICAgZ2F0ZXdheTogY3JlYXRlUGF5bWVudFJlcXVlc3QuZ2F0ZXdheSxcbiAgICAgIHBheW1lbnRfdHlwZTogY3JlYXRlUGF5bWVudFJlcXVlc3QucGF5bWVudF90eXBlLFxuICAgICAgcGF5bWVudF9zdGF0dXM6IGNyZWF0ZVBheW1lbnRSZXF1ZXN0LnBheW1lbnRfc3RhdHVzLFxuICAgICAgYW1vdW50OiBjcmVhdGVQYXltZW50UmVxdWVzdC5hbW91bnQsXG4gICAgICBjdXJyZW5jeTogY3JlYXRlUGF5bWVudFJlcXVlc3QuY3VycmVuY3ksXG4gICAgfVxuXG4gICAgY29uc3QgcGF5bWVudE1vZGVsOlBheW1lbnRNb2RlbCA9IG5ldyBQYXltZW50TW9kZWwodGhpcy5kb2NDbGllbnQpXG4gICAgXG4gICAgLy9AVE9ETzogZG8gd2hhdGV2ZXIgY2hlY2tzIG5lY2Vzc2FyeSB0byBtYWtlIHN1cmUgdGhlIHBheW1lbnQgaXMgdmFsaWRcblxuICAgIC8vQFRPRE86IGNyZWF0ZSBwYXltZW50IHJlcXVlc3Qgd2l0aCBleHRlcm5hbCBwcm92ZGllclxuXG4gICAgLy9AVE9ETzogbW9ja2luZyBwYXltZW50IGFzIHN1Y2Nlc3NmdWxcblxuICAgIG5ld1BheW1lbnQucGF5bWVudF9zdGF0dXMgPSBQYXltZW50U3RhdHVzLlNVQ0NFU1NGVUxcblxuICAgIGxldCBzYXZlZFBheW1lbnQ6UGF5bWVudFxuICAgIHRyeSB7XG4gICAgICBzYXZlZFBheW1lbnQgPSBhd2FpdCBwYXltZW50TW9kZWwucHV0KG5ld1BheW1lbnQpXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ3VuYWJsZSB0byBzYXZlIHBheW1lbnQnLFxuICAgICAgICAgIGRhdGE6IGVyclxuICAgICAgICB9XG4gICAgICB9IGFzIENvbnRyb2xsZXJSZXNwb25zZVxuICAgIH1cblxuICAgIGxldCBxdWV1ZXNDb25maWdcbiAgICB0cnkge1xuICAgICAgcXVldWVzQ29uZmlnID0gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5RVUVVRVMpXG4gICAgICBpZiAoIXF1ZXVlc0NvbmZpZy5jb21wbGV0ZVRyYWRlIHx8ICFxdWV1ZXNDb25maWcuY29tcGxldGVUcmFkZS51cmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgcXVldWVzIGNvbmZpZycpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5hYmxlIHRvIHBhcnNlIHF1ZXVlcyBjb25maWcnKVxuICAgIH0gIFxuXG4gICAgbGV0IHF1ZXVlU2VydmljZTpRdWV1ZVxuICAgIGxldCBzcXM6QVdTLlNRU1xuICAgIGxldCBtZXNzYWdlQm9keTogc3RyaW5nXG4gICAgdHJ5IHtcbiAgICAgIHF1ZXVlU2VydmljZSA9IG5ldyBRdWV1ZSgpXG4gICAgICBzcXMgPSBhd2FpdCBxdWV1ZVNlcnZpY2UuZ2V0KCkgXG4gIFxuICAgICAgbWVzc2FnZUJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkOiBjcmVhdGVQYXltZW50UmVxdWVzdC50cmFkZV9pZFxuICAgICAgfSlcbiAgXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpXG4gICAgfVxuXG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgTWVzc2FnZUJvZHk6IG1lc3NhZ2VCb2R5LFxuICAgICAgUXVldWVVcmw6IHF1ZXVlc0NvbmZpZy5jcmVhdGVPcmRlci51cmwsXG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52LlNUQUdFICE9PSAnbG9jYWwnKSB7XG4gICAgICBhd2FpdCBxdWV1ZVNlcnZpY2UucHVibGlzaChzcXMsIHBhcmFtcylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZUJvZHkpXG4gICAgfVxuXG5cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG1lc3NhZ2U6ICdwYXltZW50IHN1Y2Nlc3NmdWxseSBjcmVhdGVkJyxcbiAgICAgICAgcGF5bWVudDogc2F2ZWRQYXltZW50LFxuICAgICAgfVxuICAgIH0gYXMgQ29udHJvbGxlclJlc3BvbnNlXG5cbiAgfVxuICBcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./platform-service/controllers/payment.controller.ts\n");

/***/ }),

/***/ "./platform-service/models/_base.model.ts":
/*!************************************************!*\
  !*** ./platform-service/models/_base.model.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseModel\": () => (/* binding */ BaseModel)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_0__);\n\nclass BaseModel {\n    constructor(docClient, baseParams) {\n        this.docClient = docClient;\n        this.baseParams = baseParams;\n        this.batchSize = 25;\n    }\n    createParamObject(additionalArgs = {}) {\n        return Object.assign({}, this.baseParams, additionalArgs);\n    }\n    async put(data) {\n        let newData;\n        if (!data.id) {\n            data.id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)();\n            newData = data;\n        }\n        else {\n            newData = await this.get(data.id);\n            newData = Object.assign({}, data);\n        }\n        if (!newData.createdOn) {\n            newData.createdOn = Date.now();\n        }\n        newData.lastUpdated = Date.now();\n        const params = this.createParamObject({ Item: newData });\n        try {\n            await this.docClient.put(params).promise();\n        }\n        catch (error) {\n            console.log('docClient.put error', error);\n            throw new Error(error);\n        }\n        return newData;\n    }\n    async get(id) {\n        const params = this.createParamObject({ Key: { id } });\n        const response = await this.docClient.get(params).promise();\n        return response.Item;\n    }\n    async getBatch(ids) {\n        const keysArray = [];\n        for (const id of ids) {\n            keysArray.push({\n                'id': id\n            });\n        }\n        const params = {\n            RequestItems: {\n                [this.baseParams.TableName]: {\n                    Keys: keysArray,\n                }\n            }\n        };\n        const response = await this.docClient.batchGet(params).promise();\n        return response.Responses || [];\n    }\n    async list(consistent = false) {\n        const params = this.createParamObject({\n            ConsistentRead: consistent\n        });\n        let items = [];\n        let lastEvalKey = true;\n        while (lastEvalKey) {\n            const response = await this.docClient.scan(params).promise();\n            items = items.concat(response.Items);\n            if (response.LastEvaluatedKey) {\n                params.ExclusiveStartKey = response.LastEvaluatedKey;\n            }\n            else {\n                lastEvalKey = false;\n            }\n        }\n        return items;\n    }\n    async delete(id) {\n        const params = this.createParamObject({ Key: { id } });\n        await this.docClient.delete(params).promise();\n        return id;\n    }\n    async deleteBatch(items) {\n        let batches = [];\n        if (items.length > this.batchSize) {\n            batches.push(items.slice(0, this.batchSize));\n            for (let i = this.batchSize, l = items.length; i < l; i += this.batchSize) {\n                const batch = items.slice(i, i + this.batchSize);\n                batches.push(batch);\n            }\n        }\n        else {\n            batches.push(items);\n        }\n        let promises = [];\n        for (const batch of batches) {\n            let requestItems = [];\n            for (const item of batch) {\n                requestItems.push({\n                    DeleteRequest: {\n                        Key: {\n                            id: item.id,\n                        },\n                    },\n                });\n            }\n            const params = {\n                RequestItems: {\n                    [this.baseParams.TableName]: requestItems,\n                },\n                ReturnItemCollectionMetrics: 'SIZE',\n                ReturnConsumedCapacity: 'TOTAL',\n            };\n            promises.push(this.docClient.batchWrite(params).promise());\n        }\n        while (promises.length > 0) {\n            let batchResult = [];\n            try {\n                batchResult = await Promise.all(promises);\n            }\n            catch (err) {\n                console.log('promise all error', err);\n            }\n            promises = [];\n            for (const result of batchResult) {\n                if (Object.keys(result.UnprocessedItems).length !== 0) {\n                    const params = {\n                        RequestItems: {\n                            [this.baseParams.TableName]: result.UnprocessedItems[this.baseParams.TableName],\n                        },\n                        ReturnItemCollectionMetrics: 'SIZE',\n                        ReturnConsumedCapacity: 'TOTAL',\n                    };\n                    promises.push(this.docClient.batchWrite(params).promise());\n                }\n            }\n        }\n    }\n    async putBatch(items) {\n        if (items.length == 0) {\n            return;\n        }\n        for (const item of items) {\n            if (!item.id) {\n                item.id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)();\n            }\n            if (!item.createdOn) {\n                item.createdOn = Date.now();\n            }\n            item.lastUpdated = Date.now();\n        }\n        let batches = [];\n        if (items.length > this.batchSize) {\n            batches.push(items.slice(0, this.batchSize));\n            for (let i = this.batchSize, l = items.length; i < l; i += this.batchSize) {\n                const batch = items.slice(i, i + this.batchSize);\n                batches.push(batch);\n            }\n        }\n        else {\n            batches.push(items);\n        }\n        let promises = [];\n        for (const batch of batches) {\n            let requestItems = [];\n            for (const item of batch) {\n                requestItems.push({\n                    PutRequest: {\n                        Item: item,\n                    },\n                });\n            }\n            const params = {\n                RequestItems: {\n                    [this.baseParams.TableName]: requestItems,\n                },\n                ReturnItemCollectionMetrics: 'SIZE',\n                ReturnConsumedCapacity: 'TOTAL',\n            };\n            promises.push(this.docClient.batchWrite(params).promise());\n        }\n        while (promises.length > 0) {\n            let batchResult = [];\n            try {\n                batchResult = await Promise.all(promises);\n            }\n            catch (err) {\n                console.log('promise all error', err);\n            }\n            promises = [];\n            for (const result of batchResult) {\n                if (Object.keys(result.UnprocessedItems).length !== 0) {\n                    const params = {\n                        RequestItems: {\n                            [this.baseParams.TableName]: result.UnprocessedItems[this.baseParams.TableName],\n                        },\n                        ReturnItemCollectionMetrics: 'SIZE',\n                        ReturnConsumedCapacity: 'TOTAL',\n                    };\n                    promises.push(this.docClient.batchWrite(params).promise());\n                }\n            }\n        }\n    }\n    async getAllByGSI(params) {\n        let items = [];\n        let lastEvalKey = true;\n        while (lastEvalKey) {\n            const response = await this.docClient.query(params).promise();\n            items = items.concat(response.Items);\n            if (response.LastEvaluatedKey) {\n                params.ExclusiveStartKey = response.LastEvaluatedKey;\n            }\n            else {\n                lastEvalKey = false;\n            }\n        }\n        return { Items: items };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL21vZGVscy9fYmFzZS5tb2RlbC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQWNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ltbXV0YWJsZXgvLi9wbGF0Zm9ybS1zZXJ2aWNlL21vZGVscy9fYmFzZS5tb2RlbC50cz84ODVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5pbXBvcnQgeyBEb2N1bWVudENsaWVudCB9IGZyb20gJ2F3cy1zZGsvY2xpZW50cy9keW5hbW9kYidcblxuZXhwb3J0IGludGVyZmFjZSBCYXNlUGFyYW1zIHtcbiAgVGFibGVOYW1lOiBzdHJpbmdcbiAgQ29uc2lzdGVudFJlYWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHluYW1vQmF0Y2hlcyBleHRlbmRzIEFycmF5PER5bmFtb0l0ZW1zPnt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHluYW1vSXRlbXMgZXh0ZW5kcyBBcnJheTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIER5bmFtb1Byb21pc2VzIGV4dGVuZHMgQXJyYXk8UHJvbWlzZTxhbnk+PiB7fVxuXG5leHBvcnQgY2xhc3MgQmFzZU1vZGVsIHtcbiAgZG9jQ2xpZW50OiBEb2N1bWVudENsaWVudFxuICBiYXNlUGFyYW1zOiBCYXNlUGFyYW1zXG4gIGJhdGNoU2l6ZTogbnVtYmVyXG5cbiAgY29uc3RydWN0b3IoZG9jQ2xpZW50OiBEb2N1bWVudENsaWVudCwgYmFzZVBhcmFtczogQmFzZVBhcmFtcykge1xuICAgIHRoaXMuZG9jQ2xpZW50ID0gZG9jQ2xpZW50XG4gICAgdGhpcy5iYXNlUGFyYW1zID0gYmFzZVBhcmFtc1xuICAgIHRoaXMuYmF0Y2hTaXplID0gMjVcbiAgfVxuXG4gIGNyZWF0ZVBhcmFtT2JqZWN0KGFkZGl0aW9uYWxBcmdzID0ge30pOiBhbnkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VQYXJhbXMsIGFkZGl0aW9uYWxBcmdzKVxuICB9XG5cbiAgYXN5bmMgcHV0KGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPGFueT4ge1xuICAgIGxldCBuZXdEYXRhXG4gICAgaWYgKCFkYXRhLmlkKSB7XG4gICAgICBkYXRhLmlkID0gdXVpZHY0KClcbiAgICAgIG5ld0RhdGEgPSBkYXRhXG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0RhdGEgPSBhd2FpdCB0aGlzLmdldChkYXRhLmlkKVxuICAgICAgbmV3RGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5ld0RhdGEuY3JlYXRlZE9uKSB7XG4gICAgICBuZXdEYXRhLmNyZWF0ZWRPbiA9IERhdGUubm93KClcbiAgICB9XG5cbiAgICBuZXdEYXRhLmxhc3RVcGRhdGVkID0gRGF0ZS5ub3coKVxuXG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5jcmVhdGVQYXJhbU9iamVjdCh7IEl0ZW06IG5ld0RhdGEgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmRvY0NsaWVudC5wdXQocGFyYW1zKS5wcm9taXNlKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2RvY0NsaWVudC5wdXQgZXJyb3InLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3RGF0YVxuICB9XG5cbiAgYXN5bmMgZ2V0KGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuY3JlYXRlUGFyYW1PYmplY3QoeyBLZXk6IHsgaWQgfSB9KVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5kb2NDbGllbnQuZ2V0KHBhcmFtcykucHJvbWlzZSgpXG4gICAgLy9jb25zb2xlLmxvZygnW0Jhc2VNb2RlbC5nZXRdIHJlc3BvbnNlJywgcmVzcG9uc2UpXG4gICAgcmV0dXJuIHJlc3BvbnNlLkl0ZW1cbiAgfVxuXG4gIC8vIEBOT1RFIHRoaXMgaXMgbGltaXRlZCB0byAxMDAgaXRlbXNcbiAgYXN5bmMgZ2V0QmF0Y2goaWRzOiBBcnJheTxzdHJpbmc+KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBrZXlzQXJyYXk6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+ID0gW11cbiAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAga2V5c0FycmF5LnB1c2goe1xuICAgICAgICAnaWQnOiBpZFxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgUmVxdWVzdEl0ZW1zOiB7XG4gICAgICAgIFt0aGlzLmJhc2VQYXJhbXMuVGFibGVOYW1lXToge1xuICAgICAgICAgIEtleXM6IGtleXNBcnJheSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZG9jQ2xpZW50LmJhdGNoR2V0KHBhcmFtcykucHJvbWlzZSgpXG4gICAgcmV0dXJuIHJlc3BvbnNlLlJlc3BvbnNlcyB8fCBbXVxuICB9XG5cbiAgLy9vbmx5IHVzZSBmb3IgZGV2ICYgY3VycmVuY3lcbiAgYXN5bmMgbGlzdChjb25zaXN0ZW50OmJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5jcmVhdGVQYXJhbU9iamVjdCh7XG4gICAgICBDb25zaXN0ZW50UmVhZDogY29uc2lzdGVudFxuICAgIH0pXG5cbiAgICBsZXQgaXRlbXM6QXJyYXk8YW55PiA9IFtdXG4gICAgbGV0IGxhc3RFdmFsS2V5ID0gdHJ1ZVxuICAgIFxuICAgIHdoaWxlIChsYXN0RXZhbEtleSkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmRvY0NsaWVudC5zY2FuKHBhcmFtcykucHJvbWlzZSgpXG4gICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChyZXNwb25zZS5JdGVtcylcbiAgICAgIGlmIChyZXNwb25zZS5MYXN0RXZhbHVhdGVkS2V5KSB7XG4gICAgICAgIHBhcmFtcy5FeGNsdXNpdmVTdGFydEtleSA9IHJlc3BvbnNlLkxhc3RFdmFsdWF0ZWRLZXlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RFdmFsS2V5ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8vZG9udCB1c2UgdGhpcywgb25seSBmb3Igc2VydmVyIG1haW50ZW5hbmNlXG4gIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuY3JlYXRlUGFyYW1PYmplY3QoeyBLZXk6IHsgaWQgfSB9KVxuICAgIGF3YWl0IHRoaXMuZG9jQ2xpZW50LmRlbGV0ZShwYXJhbXMpLnByb21pc2UoKVxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgLy9kb250IHVzZSB0aGlzLCBvbmx5IGZvciBzZXJ2ZXIgbWFpbnRlbmFuY2VcbiAgYXN5bmMgZGVsZXRlQmF0Y2goaXRlbXM6IER5bmFtb0l0ZW1zKSB7XG4gICAgbGV0IGJhdGNoZXM6IER5bmFtb0JhdGNoZXMgPSBbXVxuICAgIGlmIChpdGVtcy5sZW5ndGggPiB0aGlzLmJhdGNoU2l6ZSkge1xuICAgICAgYmF0Y2hlcy5wdXNoKGl0ZW1zLnNsaWNlKDAsIHRoaXMuYmF0Y2hTaXplKSlcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJhdGNoU2l6ZSwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkgKz0gdGhpcy5iYXRjaFNpemUpIHtcbiAgICAgICAgY29uc3QgYmF0Y2g6IER5bmFtb0l0ZW1zID0gaXRlbXMuc2xpY2UoaSwgaSArIHRoaXMuYmF0Y2hTaXplKVxuICAgICAgICBiYXRjaGVzLnB1c2goYmF0Y2gpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhdGNoZXMucHVzaChpdGVtcylcbiAgICB9XG5cbiAgICBsZXQgcHJvbWlzZXM6IEFycmF5PFByb21pc2U8YW55Pj4gPSBbXVxuXG4gICAgZm9yIChjb25zdCBiYXRjaCBvZiBiYXRjaGVzKSB7XG4gICAgICBsZXQgcmVxdWVzdEl0ZW1zID0gW11cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBiYXRjaCkge1xuICAgICAgICByZXF1ZXN0SXRlbXMucHVzaCh7XG4gICAgICAgICAgRGVsZXRlUmVxdWVzdDoge1xuICAgICAgICAgICAgS2V5OiB7XG4gICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBSZXF1ZXN0SXRlbXM6IHtcbiAgICAgICAgICBbdGhpcy5iYXNlUGFyYW1zLlRhYmxlTmFtZV06IHJlcXVlc3RJdGVtcyxcbiAgICAgICAgfSxcbiAgICAgICAgUmV0dXJuSXRlbUNvbGxlY3Rpb25NZXRyaWNzOiAnU0laRScsXG4gICAgICAgIFJldHVybkNvbnN1bWVkQ2FwYWNpdHk6ICdUT1RBTCcsXG4gICAgICB9XG4gICAgICBwcm9taXNlcy5wdXNoKHRoaXMuZG9jQ2xpZW50LmJhdGNoV3JpdGUocGFyYW1zKS5wcm9taXNlKCkpXG4gICAgfVxuICAgIFxuICAgIHdoaWxlKHByb21pc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBiYXRjaFJlc3VsdDpBcnJheTxhbnk+ID0gW11cbiAgICAgIHRyeSB7XG4gICAgICAgIGJhdGNoUmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygncHJvbWlzZSBhbGwgZXJyb3InLCBlcnIpXG4gICAgICB9XG4gICAgICBwcm9taXNlcyA9IFtdIC8vY2xlYXIgdGhlIHByb21pc2VzXG4gICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBiYXRjaFJlc3VsdCkge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0LlVucHJvY2Vzc2VkSXRlbXMpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vY29uc29sZS5sb2coJ3VucHJvY2Vzc2VkIGZvdW5kJywgcmVzdWx0KVxuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIFJlcXVlc3RJdGVtczoge1xuICAgICAgICAgICAgICBbdGhpcy5iYXNlUGFyYW1zLlRhYmxlTmFtZV06IHJlc3VsdC5VbnByb2Nlc3NlZEl0ZW1zW3RoaXMuYmFzZVBhcmFtcy5UYWJsZU5hbWVdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJldHVybkl0ZW1Db2xsZWN0aW9uTWV0cmljczogJ1NJWkUnLFxuICAgICAgICAgICAgUmV0dXJuQ29uc3VtZWRDYXBhY2l0eTogJ1RPVEFMJyxcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmRvY0NsaWVudC5iYXRjaFdyaXRlKHBhcmFtcykucHJvbWlzZSgpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfS8vd2hpbGVcbiAgfVxuXG4gIGFzeW5jIHB1dEJhdGNoKGl0ZW1zOiBEeW5hbW9JdGVtcyk6IFByb21pc2U8YW55PiB7XG5cbiAgICBpZiAoaXRlbXMubGVuZ3RoID09IDApIHtcbiAgICAgIC8vY29uc29sZS5sb2coJ25vdGhpbmcgdG8gcHV0OicsIGl0ZW1zKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBpZiAoIWl0ZW0uaWQpIHtcbiAgICAgICAgaXRlbS5pZCA9IHV1aWR2NCgpXG4gICAgICB9XG4gIFxuICAgICAgaWYgKCFpdGVtLmNyZWF0ZWRPbikge1xuICAgICAgICBpdGVtLmNyZWF0ZWRPbiA9IERhdGUubm93KClcbiAgICAgIH1cbiAgXG4gICAgICBpdGVtLmxhc3RVcGRhdGVkID0gRGF0ZS5ub3coKVxuICAgIH1cblxuICAgIGxldCBiYXRjaGVzOiBEeW5hbW9CYXRjaGVzID0gW11cbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gdGhpcy5iYXRjaFNpemUpIHtcbiAgICAgIGJhdGNoZXMucHVzaChpdGVtcy5zbGljZSgwLCB0aGlzLmJhdGNoU2l6ZSkpXG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5iYXRjaFNpemUsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpICs9IHRoaXMuYmF0Y2hTaXplKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoOiBEeW5hbW9JdGVtcyA9IGl0ZW1zLnNsaWNlKGksIGkgKyB0aGlzLmJhdGNoU2l6ZSlcbiAgICAgICAgYmF0Y2hlcy5wdXNoKGJhdGNoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBiYXRjaGVzLnB1c2goaXRlbXMpXG4gICAgfVxuXG4gICAgbGV0IHByb21pc2VzOiBBcnJheTxQcm9taXNlPGFueT4+ID0gW11cblxuICAgIGZvciAoY29uc3QgYmF0Y2ggb2YgYmF0Y2hlcykge1xuICAgICAgbGV0IHJlcXVlc3RJdGVtcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmF0Y2gpIHtcbiAgICAgICAgcmVxdWVzdEl0ZW1zLnB1c2goe1xuICAgICAgICAgIFB1dFJlcXVlc3Q6IHtcbiAgICAgICAgICAgIEl0ZW06IGl0ZW0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICBcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgUmVxdWVzdEl0ZW1zOiB7XG4gICAgICAgICAgW3RoaXMuYmFzZVBhcmFtcy5UYWJsZU5hbWVdOiByZXF1ZXN0SXRlbXMsXG4gICAgICAgIH0sXG4gICAgICAgIFJldHVybkl0ZW1Db2xsZWN0aW9uTWV0cmljczogJ1NJWkUnLFxuICAgICAgICBSZXR1cm5Db25zdW1lZENhcGFjaXR5OiAnVE9UQUwnLFxuICAgICAgfVxuICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmRvY0NsaWVudC5iYXRjaFdyaXRlKHBhcmFtcykucHJvbWlzZSgpKVxuICAgIH1cbiAgICBcbiAgICB3aGlsZShwcm9taXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgYmF0Y2hSZXN1bHQ6QXJyYXk8YW55PiA9IFtdXG4gICAgICB0cnkge1xuICAgICAgICBiYXRjaFJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Byb21pc2UgYWxsIGVycm9yJywgZXJyKVxuICAgICAgfVxuICAgICAgcHJvbWlzZXMgPSBbXSAvL2NsZWFyIHRoZSBwcm9taXNlc1xuICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgYmF0Y2hSZXN1bHQpIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5VbnByb2Nlc3NlZEl0ZW1zKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKCd1bnByb2Nlc3NlZCBmb3VuZCcsIHJlc3VsdClcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBSZXF1ZXN0SXRlbXM6IHtcbiAgICAgICAgICAgICAgW3RoaXMuYmFzZVBhcmFtcy5UYWJsZU5hbWVdOiByZXN1bHQuVW5wcm9jZXNzZWRJdGVtc1t0aGlzLmJhc2VQYXJhbXMuVGFibGVOYW1lXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBSZXR1cm5JdGVtQ29sbGVjdGlvbk1ldHJpY3M6ICdTSVpFJyxcbiAgICAgICAgICAgIFJldHVybkNvbnN1bWVkQ2FwYWNpdHk6ICdUT1RBTCcsXG4gICAgICAgICAgfVxuICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5kb2NDbGllbnQuYmF0Y2hXcml0ZShwYXJhbXMpLnByb21pc2UoKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0vL3doaWxlXG4gIH1cblxuICBhc3luYyBnZXRBbGxCeUdTSShwYXJhbXMpIHtcbiAgICBsZXQgaXRlbXM6QXJyYXk8YW55PiA9IFtdXG4gICAgbGV0IGxhc3RFdmFsS2V5ID0gdHJ1ZVxuICAgIFxuICAgIHdoaWxlIChsYXN0RXZhbEtleSkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmRvY0NsaWVudC5xdWVyeShwYXJhbXMpLnByb21pc2UoKVxuICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQocmVzcG9uc2UuSXRlbXMpXG4gICAgICBpZiAocmVzcG9uc2UuTGFzdEV2YWx1YXRlZEtleSkge1xuICAgICAgICBwYXJhbXMuRXhjbHVzaXZlU3RhcnRLZXkgPSByZXNwb25zZS5MYXN0RXZhbHVhdGVkS2V5XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXN0RXZhbEtleSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtJdGVtczogaXRlbXN9XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./platform-service/models/_base.model.ts\n");

/***/ }),

/***/ "./platform-service/models/payment.model.ts":
/*!**************************************************!*\
  !*** ./platform-service/models/payment.model.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PaymentGateways\": () => (/* binding */ PaymentGateways),\n/* harmony export */   \"PaymentModel\": () => (/* binding */ PaymentModel),\n/* harmony export */   \"PaymentStatus\": () => (/* binding */ PaymentStatus),\n/* harmony export */   \"PaymentType\": () => (/* binding */ PaymentType)\n/* harmony export */ });\n/* harmony import */ var _base_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_base.model */ \"./platform-service/models/_base.model.ts\");\n\nvar PaymentGateways;\n(function (PaymentGateways) {\n    PaymentGateways[\"STRIPE\"] = \"STRIPE\";\n    PaymentGateways[\"COINPAYMENTS\"] = \"COINPAYMENTS\";\n    PaymentGateways[\"BITPAY\"] = \"BITPAY\";\n})(PaymentGateways || (PaymentGateways = {}));\nvar PaymentType;\n(function (PaymentType) {\n    PaymentType[\"CRYPTO\"] = \"CRYPTO\";\n    PaymentType[\"CREDIT\"] = \"CREDIT\";\n    PaymentType[\"BANK\"] = \"BANK\";\n})(PaymentType || (PaymentType = {}));\nvar PaymentStatus;\n(function (PaymentStatus) {\n    PaymentStatus[\"PENDING\"] = \"PENDING\";\n    PaymentStatus[\"SUCCESSFUL\"] = \"SUCCESSFUL\";\n    PaymentStatus[\"FAILED\"] = \"FAILED\";\n    PaymentStatus[\"TIMEDOUT\"] = \"TIMEDOUT\";\n    PaymentStatus[\"CANCELLED\"] = \"CANCELLED\";\n})(PaymentStatus || (PaymentStatus = {}));\nclass PaymentModel extends _base_model__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n    constructor(docClient) {\n        const baseParams = {\n            TableName: 'payment-' + process.env.STAGE,\n        };\n        super(docClient, baseParams);\n        this.docClient = docClient;\n    }\n    async getPaymentByTradeIdAndStatus(tradeId, status) {\n        if (!tradeId || !status) {\n            console.error('invalid tradeId or status');\n            return [];\n        }\n        const params = this.createParamObject({\n            IndexName: 'paymentTradeStatusIndex',\n            KeyConditionExpression: 'trade_id = :tradeId AND payment_status = :orderStatus',\n            ExpressionAttributeValues: {\n                ':tradeId': tradeId,\n                ':orderStatus': status,\n            },\n        });\n        try {\n            const response = await this.getAllByGSI(params);\n            return response.Items;\n        }\n        catch (err) {\n            console.error('error', err);\n        }\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL21vZGVscy9wYXltZW50Lm1vZGVsLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFnQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvbW9kZWxzL3BheW1lbnQubW9kZWwudHM/NTViNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTW9kZWwsIEJhc2VQYXJhbXMgfSBmcm9tICcuL19iYXNlLm1vZGVsJ1xuaW1wb3J0IHsgRG9jdW1lbnRDbGllbnQgfSBmcm9tICdhd3Mtc2RrL2NsaWVudHMvZHluYW1vZGInXG5pbXBvcnQgeyBBdmFpbGFibGVDdXJyZW5jaWVzIH0gZnJvbSAnLi9jdXJyZW5jaWVzLm1vZGVsJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnQge1xuICBpZD86IHN0cmluZ1xuICB0cmFkZV9pZDogc3RyaW5nXG4gIGdhdGV3YXk6IFBheW1lbnRHYXRld2F5c1xuICBwYXltZW50X3R5cGU6IFBheW1lbnRUeXBlXG4gIHBheW1lbnRfc3RhdHVzOiBQYXltZW50U3RhdHVzXG4gIGFtb3VudDogbnVtYmVyXG4gIGN1cnJlbmN5OiBBdmFpbGFibGVDdXJyZW5jaWVzXG4gIGNyZWF0ZWQ/OiBudW1iZXJcbiAgbGFzdF91cGRhdGVkPzogbnVtYmVyXG59XG5cbmV4cG9ydCBlbnVtIFBheW1lbnRHYXRld2F5cyB7XG4gIFNUUklQRSA9IFwiU1RSSVBFXCIsXG4gIENPSU5QQVlNRU5UUyA9IFwiQ09JTlBBWU1FTlRTXCIsXG4gIEJJVFBBWSA9IFwiQklUUEFZXCIsXG59XG5cbmV4cG9ydCBlbnVtIFBheW1lbnRUeXBlIHtcbiAgQ1JZUFRPID0gXCJDUllQVE9cIixcbiAgQ1JFRElUID0gXCJDUkVESVRcIixcbiAgQkFOSyA9IFwiQkFOS1wiLFxufVxuXG5leHBvcnQgZW51bSBQYXltZW50U3RhdHVzIHtcbiAgUEVORElORyA9IFwiUEVORElOR1wiLFxuICBTVUNDRVNTRlVMID0gXCJTVUNDRVNTRlVMXCIsXG4gIEZBSUxFRCA9IFwiRkFJTEVEXCIsXG4gIFRJTUVET1VUID0gXCJUSU1FRE9VVFwiLFxuICBDQU5DRUxMRUQgPSBcIkNBTkNFTExFRFwiLFxufVxuXG5leHBvcnQgY2xhc3MgUGF5bWVudE1vZGVsIGV4dGVuZHMgQmFzZU1vZGVsIHtcbiAgZG9jQ2xpZW50OiBEb2N1bWVudENsaWVudFxuXG4gIGNvbnN0cnVjdG9yKGRvY0NsaWVudDogRG9jdW1lbnRDbGllbnQpIHtcbiAgICBjb25zdCBiYXNlUGFyYW1zOiBCYXNlUGFyYW1zID0ge1xuICAgICAgVGFibGVOYW1lOiAncGF5bWVudC0nICsgcHJvY2Vzcy5lbnYuU1RBR0UsXG4gICAgfVxuICAgIHN1cGVyKGRvY0NsaWVudCwgYmFzZVBhcmFtcylcbiAgICB0aGlzLmRvY0NsaWVudCA9IGRvY0NsaWVudFxuICB9XG5cbiAgYXN5bmMgZ2V0UGF5bWVudEJ5VHJhZGVJZEFuZFN0YXR1cyh0cmFkZUlkOiBzdHJpbmcsIHN0YXR1czogUGF5bWVudFN0YXR1cyk6IFByb21pc2U8QXJyYXk8UGF5bWVudD4+IHtcblxuICAgIGlmICghdHJhZGVJZCB8fCAhc3RhdHVzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdpbnZhbGlkIHRyYWRlSWQgb3Igc3RhdHVzJylcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICAgICAgXG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5jcmVhdGVQYXJhbU9iamVjdCh7XG4gICAgICBJbmRleE5hbWU6ICdwYXltZW50VHJhZGVTdGF0dXNJbmRleCcsXG4gICAgICBLZXlDb25kaXRpb25FeHByZXNzaW9uOiAndHJhZGVfaWQgPSA6dHJhZGVJZCBBTkQgcGF5bWVudF9zdGF0dXMgPSA6b3JkZXJTdGF0dXMnLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAnOnRyYWRlSWQnOiB0cmFkZUlkLFxuICAgICAgICAnOm9yZGVyU3RhdHVzJzogc3RhdHVzLFxuICAgICAgfSxcbiAgICB9KVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0QWxsQnlHU0kocGFyYW1zKVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLkl0ZW1zXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yJywgZXJyKVxuICAgIH1cblxuICAgIHJldHVybiBbXVxuXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./platform-service/models/payment.model.ts\n");

/***/ }),

/***/ "./platform-service/utils/dynamodb.util.ts":
/*!*************************************************!*\
  !*** ./platform-service/utils/dynamodb.util.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDocClient\": () => (/* binding */ createDocClient)\n/* harmony export */ });\n/* harmony import */ var aws_sdk_clients_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk/clients/dynamodb */ \"aws-sdk/clients/dynamodb\");\n/* harmony import */ var aws_sdk_clients_dynamodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk_clients_dynamodb__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction createDocClient(env) {\n    let options;\n    if (env.STAGE == 'local') {\n        options = {\n            endpoint: env.SLS_A_ENDPOINT,\n            region: 'localhost',\n            accessKeyId: env.SLS_A_ACCESS_KEY_ID,\n            secretAccessKey: env.SLS_A_SECRET_ACCESS_KEY,\n        };\n    }\n    else {\n        options = {\n            region: process.env.SLS_A_REGION,\n            accessKeyId: env.SLS_A_ACCESS_KEY_ID,\n            secretAccessKey: env.SLS_A_SECRET_ACCESS_KEY,\n        };\n    }\n    return new aws_sdk_clients_dynamodb__WEBPACK_IMPORTED_MODULE_0__.DocumentClient(options);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL2R5bmFtb2RiLnV0aWwudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ltbXV0YWJsZXgvLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL2R5bmFtb2RiLnV0aWwudHM/YjE5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb2N1bWVudENsaWVudCB9IGZyb20gJ2F3cy1zZGsvY2xpZW50cy9keW5hbW9kYidcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURvY0NsaWVudChlbnY6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBEb2N1bWVudENsaWVudCB7XG4gIGxldCBvcHRpb25zXG5cbiAgaWYgKGVudi5TVEFHRSA9PSAnbG9jYWwnKSB7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIGVuZHBvaW50OiBlbnYuU0xTX0FfRU5EUE9JTlQsXG4gICAgICByZWdpb246ICdsb2NhbGhvc3QnLFxuICAgICAgYWNjZXNzS2V5SWQ6IGVudi5TTFNfQV9BQ0NFU1NfS0VZX0lELFxuICAgICAgc2VjcmV0QWNjZXNzS2V5OiBlbnYuU0xTX0FfU0VDUkVUX0FDQ0VTU19LRVksXG4gICAgfSAgICBcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgcmVnaW9uOiBwcm9jZXNzLmVudi5TTFNfQV9SRUdJT04sXG4gICAgICBhY2Nlc3NLZXlJZDogZW52LlNMU19BX0FDQ0VTU19LRVlfSUQsXG4gICAgICBzZWNyZXRBY2Nlc3NLZXk6IGVudi5TTFNfQV9TRUNSRVRfQUNDRVNTX0tFWSxcbiAgICB9ICAgICBcbiAgfVxuXG4gIHJldHVybiBuZXcgRG9jdW1lbnRDbGllbnQob3B0aW9ucylcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./platform-service/utils/dynamodb.util.ts\n");

/***/ }),

/***/ "./platform-service/utils/helper.util.ts":
/*!***********************************************!*\
  !*** ./platform-service/utils/helper.util.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Utils\": () => (/* binding */ Utils),\n/* harmony export */   \"Values\": () => (/* binding */ Values)\n/* harmony export */ });\nvar Values;\n(function (Values) {\n    Values[Values[\"satoshi\"] = 100000000] = \"satoshi\";\n    Values[Values[\"dollarDecimal\"] = 100] = \"dollarDecimal\";\n    Values[Values[\"mBTC\"] = 100000] = \"mBTC\";\n    Values[Values[\"wei\"] = 1000000000000000000] = \"wei\";\n})(Values || (Values = {}));\nclass Utils {\n    static enumToArray(Enum) {\n        const tmp = [];\n        for (const prop in Enum) {\n            if (Enum.hasOwnProperty(prop)) {\n                tmp.push(Enum[prop]);\n            }\n        }\n        return tmp;\n    }\n    static dollarRounded(value) {\n        if (typeof value == 'string') {\n            value = parseFloat(value);\n        }\n        return Math.round(value * Values.dollarDecimal) / Values.dollarDecimal;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL2hlbHBlci51dGlsLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvdXRpbHMvaGVscGVyLnV0aWwudHM/MTUxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBWYWx1ZXMge1xuICBzYXRvc2hpID0gMTAwMDAwMDAwLFxuICBkb2xsYXJEZWNpbWFsID0gMTAwLFxuICBtQlRDID0gMTAwMDAwLFxuICB3ZWkgPSAxMDAwMDAwMDAwMDAwMDAwMDAwLFxufVxuXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuICBzdGF0aWMgZW51bVRvQXJyYXkoRW51bTphbnkpIHtcbiAgICBcbiAgICBjb25zdCB0bXAgPSBbXVxuXG4gICAgZm9yIChjb25zdCBwcm9wIGluIEVudW0pIHtcbiAgICAgIGlmIChFbnVtLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIHRtcC5wdXNoKEVudW1bcHJvcF0pXG4gICAgICB9XG4gICAgfVxuICAgICAgXG4gICAgcmV0dXJuIHRtcFxuXG4gIH1cblxuICBzdGF0aWMgZG9sbGFyUm91bmRlZCh2YWx1ZTpzdHJpbmd8bnVtYmVyKSB7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiBWYWx1ZXMuZG9sbGFyRGVjaW1hbCkgLyBWYWx1ZXMuZG9sbGFyRGVjaW1hbDtcblxuICB9XG5cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./platform-service/utils/helper.util.ts\n");

/***/ }),

/***/ "./platform-service/utils/queue.util.ts":
/*!**********************************************!*\
  !*** ./platform-service/utils/queue.util.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Queue\": () => (/* binding */ Queue)\n/* harmony export */ });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n\nclass Queue {\n    constructor() {\n    }\n    async get() {\n        const config = {\n            accessKeyId: process.env.SLS_A_ACCESS_KEY_ID,\n            secretAccessKey: process.env.SLS_A_SECRET_ACCESS_KEY,\n            region: process.env.SLS_A_REGION,\n        };\n        aws_sdk__WEBPACK_IMPORTED_MODULE_0__.config.update(config);\n        const sqs = new aws_sdk__WEBPACK_IMPORTED_MODULE_0__.SQS();\n        return sqs;\n    }\n    async publish(sqs, params) {\n        return new Promise((resolve, reject) => {\n            sqs.sendMessage(params, function (err, data) {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(data);\n                }\n            });\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL3F1ZXVlLnV0aWwudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvdXRpbHMvcXVldWUudXRpbC50cz9mY2RjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFXUyBmcm9tICdhd3Mtc2RrJ1xuXG5leHBvcnQgY2xhc3MgUXVldWUge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG5cbiAgYXN5bmMgZ2V0KCk6IFByb21pc2U8QVdTLlNRUz4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5TTFNfQV9BQ0NFU1NfS0VZX0lELFxuICAgICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5TTFNfQV9TRUNSRVRfQUNDRVNTX0tFWSxcbiAgICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuU0xTX0FfUkVHSU9OLFxuICAgIH1cbiAgICBBV1MuY29uZmlnLnVwZGF0ZShjb25maWcpXG4gICAgY29uc3Qgc3FzID0gbmV3IEFXUy5TUVMoKVxuXG4gICAgcmV0dXJuIHNxc1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaChzcXMsIHBhcmFtcykge1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHNxcy5zZW5kTWVzc2FnZShwYXJhbXMsIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGRhdGEpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./platform-service/utils/queue.util.ts\n");

/***/ }),

/***/ "./platform-service/utils/request.util.ts":
/*!************************************************!*\
  !*** ./platform-service/utils/request.util.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RequestFormatters\": () => (/* binding */ RequestFormatters),\n/* harmony export */   \"parseWith\": () => (/* binding */ parseWith)\n/* harmony export */ });\n/* harmony import */ var _helper_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper.util */ \"./platform-service/utils/helper.util.ts\");\n\nfunction parseWith(data, formatter) {\n    let parsed;\n    if (!data) {\n        throw new Error('[request.util.parseWith] no data to parse');\n    }\n    if (!_helper_util__WEBPACK_IMPORTED_MODULE_0__.Utils.enumToArray(RequestFormatters).includes(formatter)) {\n        throw new Error('[request.util.parseWith] invalid formatter');\n    }\n    try {\n        switch (formatter) {\n            case 'JSON':\n                parsed = JSON.parse(data);\n                break;\n            default:\n                throw new Error('[request.util.parseWith] invalid formatter');\n        }\n        return parsed;\n    }\n    catch (e) {\n        throw new Error('[request.util.parseWith] parser not handled');\n    }\n}\nvar RequestFormatters;\n(function (RequestFormatters) {\n    RequestFormatters[\"JSON\"] = \"JSON\";\n})(RequestFormatters || (RequestFormatters = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL3JlcXVlc3QudXRpbC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbW11dGFibGV4Ly4vcGxhdGZvcm0tc2VydmljZS91dGlscy9yZXF1ZXN0LnV0aWwudHM/Yzc0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuL2hlbHBlci51dGlsXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlV2l0aChkYXRhOiBzdHJpbmcsIGZvcm1hdHRlcjogUmVxdWVzdEZvcm1hdHRlcnMpOiBhbnkge1xuXG4gIGxldCBwYXJzZWQ6YW55XG5cbiAgaWYgKCFkYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbcmVxdWVzdC51dGlsLnBhcnNlV2l0aF0gbm8gZGF0YSB0byBwYXJzZScpXG4gIH1cblxuICBpZiAoIVV0aWxzLmVudW1Ub0FycmF5KFJlcXVlc3RGb3JtYXR0ZXJzKS5pbmNsdWRlcyhmb3JtYXR0ZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbcmVxdWVzdC51dGlsLnBhcnNlV2l0aF0gaW52YWxpZCBmb3JtYXR0ZXInKVxuICB9XG5cbiAgdHJ5IHtcbiAgICBzd2l0Y2ggKGZvcm1hdHRlcikge1xuICAgICAgY2FzZSAnSlNPTic6XG4gICAgICAgIHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignW3JlcXVlc3QudXRpbC5wYXJzZVdpdGhdIGludmFsaWQgZm9ybWF0dGVyJylcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VkXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1tyZXF1ZXN0LnV0aWwucGFyc2VXaXRoXSBwYXJzZXIgbm90IGhhbmRsZWQnKVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIFVua25vd25PYmplY3QgPSB7XG4gIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5leHBvcnQgZW51bSBSZXF1ZXN0Rm9ybWF0dGVycyB7XG4gIEpTT04gPSAnSlNPTicsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./platform-service/utils/request.util.ts\n");

/***/ }),

/***/ "./platform-service/utils/response.util.ts":
/*!*************************************************!*\
  !*** ./platform-service/utils/response.util.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Response\": () => (/* binding */ Response),\n/* harmony export */   \"ResponseCodes\": () => (/* binding */ ResponseCodes),\n/* harmony export */   \"ResponseFormatters\": () => (/* binding */ ResponseFormatters),\n/* harmony export */   \"ResponseTypes\": () => (/* binding */ ResponseTypes)\n/* harmony export */ });\nclass Response {\n    constructor(formatter) {\n        this.formatter = formatter;\n        if (process.env.HEADERS) {\n            try {\n                this.headers = JSON.parse(process.env.HEADERS);\n            }\n            catch (error) {\n                throw new Error('unable to parse headers');\n            }\n        }\n    }\n    respond(statusCode, data = null) {\n        if (statusCode < 100 || statusCode > 599) {\n            throw new Error('status code out of range');\n        }\n        const response = {\n            statusCode,\n            headers: {\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Credentials': true,\n            },\n        };\n        if (this.headers) {\n            if (this.headers.allowOrigin)\n                response.headers['Access-Control-Allow-Origin'] = this.headers.allowOrigin;\n            if (this.headers.allowMethods)\n                response.headers['Access-Control-Allow-Methods'] = this.headers.allowMethods;\n        }\n        switch (this.formatter) {\n            case 'JSON':\n                response.body = JSON.stringify(data);\n                break;\n            default:\n                response.body = data;\n        }\n        return response;\n    }\n}\nvar ResponseFormatters;\n(function (ResponseFormatters) {\n    ResponseFormatters[\"JSON\"] = \"JSON\";\n})(ResponseFormatters || (ResponseFormatters = {}));\nvar ResponseCodes;\n(function (ResponseCodes) {\n    ResponseCodes[ResponseCodes[\"BAD_REQUEST\"] = 400] = \"BAD_REQUEST\";\n    ResponseCodes[ResponseCodes[\"UNAUTHORISED\"] = 401] = \"UNAUTHORISED\";\n    ResponseCodes[ResponseCodes[\"OK\"] = 200] = \"OK\";\n    ResponseCodes[ResponseCodes[\"SERVER_ERROR\"] = 500] = \"SERVER_ERROR\";\n})(ResponseCodes || (ResponseCodes = {}));\nvar ResponseTypes;\n(function (ResponseTypes) {\n    ResponseTypes[\"POST\"] = \"post\";\n    ResponseTypes[\"GET\"] = \"get\";\n})(ResponseTypes || (ResponseTypes = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbGF0Zm9ybS1zZXJ2aWNlL3V0aWxzL3Jlc3BvbnNlLnV0aWwudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1tdXRhYmxleC8uL3BsYXRmb3JtLXNlcnZpY2UvdXRpbHMvcmVzcG9uc2UudXRpbC50cz85ZjU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBSZXNwb25zZSB7XG4gIHByaXZhdGUgZm9ybWF0dGVyOiBSZXNwb25zZUZvcm1hdHRlcnNcbiAgcHJpdmF0ZSBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG5cbiAgY29uc3RydWN0b3IoZm9ybWF0dGVyOiBSZXNwb25zZUZvcm1hdHRlcnMpIHtcbiAgICB0aGlzLmZvcm1hdHRlciA9IGZvcm1hdHRlclxuXG4gICAgaWYgKHByb2Nlc3MuZW52LkhFQURFUlMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuSEVBREVSUylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5hYmxlIHRvIHBhcnNlIGhlYWRlcnMnKVxuICAgICAgfVxuICAgIH0gICBcblxuICB9XG5cbiAgcmVzcG9uZChzdGF0dXNDb2RlOiBSZXNwb25zZUNvZGVzLCBkYXRhOiBhbnkgPSBudWxsKTogSHR0cFJlc3BvbnNlIHtcbiAgICBpZiAoc3RhdHVzQ29kZSA8IDEwMCB8fCBzdGF0dXNDb2RlID4gNTk5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXR1cyBjb2RlIG91dCBvZiByYW5nZScpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2U6IEh0dHBSZXNwb25zZSA9IHtcbiAgICAgIHN0YXR1c0NvZGUsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyc6IHRydWUsXG4gICAgICB9LFxuICAgIH1cblxuICAgIGlmICh0aGlzLmhlYWRlcnMpIHtcbiAgICAgIGlmICh0aGlzLmhlYWRlcnMuYWxsb3dPcmlnaW4pIHJlc3BvbnNlLmhlYWRlcnNbJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiddID0gdGhpcy5oZWFkZXJzLmFsbG93T3JpZ2luXG4gICAgICBpZiAodGhpcy5oZWFkZXJzLmFsbG93TWV0aG9kcykgcmVzcG9uc2UuaGVhZGVyc1snQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyddID0gdGhpcy5oZWFkZXJzLmFsbG93TWV0aG9kc1xuICAgIH0gXG5cbiAgICBzd2l0Y2ggKHRoaXMuZm9ybWF0dGVyKSB7XG4gICAgICBjYXNlICdKU09OJzpcbiAgICAgICAgcmVzcG9uc2UuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXNwb25zZS5ib2R5ID0gZGF0YVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIEh0dHBSZXNwb25zZSA9IHtcbiAgYm9keT86IHN0cmluZ1xuICBzdGF0dXNDb2RlOiBudW1iZXJcbiAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbn1cblxuZXhwb3J0IGVudW0gUmVzcG9uc2VGb3JtYXR0ZXJzIHtcbiAgJ0pTT04nID0gJ0pTT04nLFxufVxuXG5leHBvcnQgZW51bSBSZXNwb25zZUNvZGVzIHtcbiAgJ0JBRF9SRVFVRVNUJyA9IDQwMCxcbiAgJ1VOQVVUSE9SSVNFRCcgPSA0MDEsXG4gICdPSycgPSAyMDAsXG4gICdTRVJWRVJfRVJST1InID0gNTAwLFxufVxuXG5leHBvcnQgZW51bSBSZXNwb25zZVR5cGVzIHtcbiAgJ1BPU1QnID0gJ3Bvc3QnLFxuICAnR0VUJyA9ICdnZXQnLFxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./platform-service/utils/response.util.ts\n");

/***/ }),

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "aws-sdk/clients/dynamodb":
/*!*******************************************!*\
  !*** external "aws-sdk/clients/dynamodb" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("aws-sdk/clients/dynamodb");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("uuid");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./platform-service/api/payment.ts");
/******/ 	var __webpack_export_target__ = exports;
/******/ 	for(var i in __webpack_exports__) __webpack_export_target__[i] = __webpack_exports__[i];
/******/ 	if(__webpack_exports__.__esModule) Object.defineProperty(__webpack_export_target__, "__esModule", { value: true });
/******/ 	
/******/ })()
;